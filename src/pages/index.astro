---
import Layout from '../layouts/Layout.astro';
import Welcome from '../components/Welcome.astro';
---

<Layout title="OdysseyDev - Desarrollo Web Premium">
	<Welcome />
	
	<script is:inline src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
	
	<script is:inline>
		if (window.netlifyIdentity) {
			// 1. Inicializaci贸n limpia (sin contenedores)
			window.netlifyIdentity.init();
			
			// 2. Si detecta un token en la URL (invitaci贸n o recuperaci贸n), se abre solo
			// Pero por seguridad, forzamos la apertura si hay un hash
			if (window.location.hash) {
				window.netlifyIdentity.open();
			}
			
			// 3. Redirecci贸n al loguearse
			window.netlifyIdentity.on('login', () => {
				document.location.href = '/admin/';
			});
		}
	</script>
</Layout>
